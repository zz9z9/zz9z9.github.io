<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="WEB - nginx 처리율 제한 살펴보기" /><meta property="og:locale" content="en_US" /><meta name="description" content="nginx는 처리율 제한을 위해 ‘leaky bucket algorithm’ 사용 leaky bucket algorithm 물 : 사용자 요청 버킷 : 요청이 대기하는 큐 넘치는 물 : 큐가 다 차서 거절되는 요청 새는 물 : 서버에 의해 처리되는 요청" /><meta property="og:description" content="nginx는 처리율 제한을 위해 ‘leaky bucket algorithm’ 사용 leaky bucket algorithm 물 : 사용자 요청 버킷 : 요청이 대기하는 큐 넘치는 물 : 큐가 다 차서 거절되는 요청 새는 물 : 서버에 의해 처리되는 요청" /><link rel="canonical" href="https://zz9z9.github.io/posts/nginx-rate-limiting/" /><meta property="og:url" content="https://zz9z9.github.io/posts/nginx-rate-limiting/" /><meta property="og:site_name" content="zz9z9" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-05-20T21:25:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="WEB - nginx 처리율 제한 살펴보기" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-05-25T00:33:06+09:00","datePublished":"2025-05-20T21:25:00+09:00","description":"nginx는 처리율 제한을 위해 ‘leaky bucket algorithm’ 사용 leaky bucket algorithm 물 : 사용자 요청 버킷 : 요청이 대기하는 큐 넘치는 물 : 큐가 다 차서 거절되는 요청 새는 물 : 서버에 의해 처리되는 요청","headline":"WEB - nginx 처리율 제한 살펴보기","mainEntityOfPage":{"@type":"WebPage","@id":"https://zz9z9.github.io/posts/nginx-rate-limiting/"},"url":"https://zz9z9.github.io/posts/nginx-rate-limiting/"}</script><title>WEB - nginx 처리율 제한 살펴보기 | zz9z9</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="zz9z9"><meta name="application-name" content="zz9z9"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Q7PWLG5WYT"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Q7PWLG5WYT'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Soccerball.svg/1000px-Soccerball.svg.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">zz9z9</a></div><div class="site-subtitle font-italic">거창한 계획보다는, 꾸준한 실행을</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/zz9z9" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>WEB - nginx 처리율 제한 살펴보기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>WEB - nginx 처리율 제한 살펴보기</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Lee JaeYoon </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, May 20, 2025, 9:25 PM +0900" prep="on" > May 20 <i class="unloaded">2025-05-20T21:25:00+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, May 25, 2025, 12:33 AM +0900" prefix="Updated " > May 25 <i class="unloaded">2025-05-25T00:33:06+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2205 words">12 min</span></div></div><div class="post-content"><ul><li>nginx는 처리율 제한을 위해 ‘leaky bucket algorithm’ 사용<li>leaky bucket algorithm<ul><li>물 : 사용자 요청<li>버킷 : 요청이 대기하는 큐<li>넘치는 물 : 큐가 다 차서 거절되는 요청<li>새는 물 : 서버에 의해 처리되는 요청</ul></ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>limit_req_zone $binary_remote_addr zone=mylimit:10m rate=10r/s;

server {
    location /login/ {
        limit_req zone=mylimit;

        proxy_pass http://my_upstream;
    }
}
</pre></table></code></div></div><h3 id="limit_req_zone">limit_req_zone</h3><ul><li>문법 : <code class="language-plaintext highlighter-rouge">limit_req_zone key zone=name:size rate=rate [sync];</code><li>Context : <code class="language-plaintext highlighter-rouge">http</code></ul><p><strong>key</strong></p><ul><li>어떤 기준으로 요청을 제한할지를 지정<li>예제에서는 <code class="language-plaintext highlighter-rouge">$binary_remote_addr</code>를 사용하고 있는데, 이 변수는 클라이언트의 IP 주소를 이진 형태로 나타낸다.<li>특정 api 호출 전체를 제한하려면 ?<ul><li><code class="language-plaintext highlighter-rouge">$server_name</code> 같은 공통키 사용</ul></ul><p><strong>zone</strong></p><ul><li>제한 상태(예: 각 IP가 얼마나 자주 요청했는지 등)를 저장하는 공유 메모리 공간을 지정<li>공유 메모리를 사용하기 때문에, 이 정보는 여러 NGINX 워커 프로세스 간에 공유<li>IP 주소 하나당 상태 정보 저장에 약 64바이트(32bit), 128바이트(64bit) 가 필요<ul><li>따라서 32bit 기준 1MB로 약 16,000개 64비트 기준 약 8,000개 저장 가능</ul><li>새로운 항목을 만들 때마다 최근 60초 동안 사용되지 않은 항목 최대 2개를 제거해 메모리 고갈을 방지<li>만약 저장 공간이 가득 찼는데 새로운 IP 주소의 상태 정보를 저장하려고 하면:<ul><li>가장 오래된 항목을 제거하고, 그래도 공간이 부족하면 <code class="language-plaintext highlighter-rouge">503(Service Temporarily Unavailable)</code> 상태 코드를 반환</ul></ul><p><strong>rate</strong></p><ul><li>최대 요청 속도를 지정<li>예를 들어 10r/s라고 하면, 초당 10건의 요청만 허용<ul><li>nginx는 밀리초 단위로 요청을 추적하므로, 이 설정은 <strong>100ms마다 1개의 요청을 허용</strong>한다는 의미</ul><li>지원 단위 : 초(<code class="language-plaintext highlighter-rouge">r/s</code>), 분(<code class="language-plaintext highlighter-rouge">r/m</code>)</ul><p><strong>sync ?</strong></p><ul><li>워커 프로세스가 여러 개일 때 공유 메모리(zone)를 이용해 rate limit 상태를 공유하지만, 워크로드이 많거나 고속 요청 환경에서는 다음 문제가 생길 수 있다:<ul><li>워커 프로세스들이 동시에 zone을 업데이트하면 동기화 지연이나 race condition처럼 보이는 현상이 발생할 수 있음<li>즉, 잠깐 동안 초과 요청이 제한 없이 들어가는 것처럼 보일 수 있음</ul><li>sync 옵션은 이런 상황에서:<ul><li>정확도 향상 : 요청 제한 속도를 보다 정확하게 적용<li>레이스 컨디션 방지 : 워커 간 동시 업데이트 시 충돌 완화<li>Burst 처리의 일관성 개선 : 여러 워커가 동시에 burst 큐를 채우는 상황을 제어</ul></ul><h3 id="limit_req">limit_req</h3><ul><li>문법 : <code class="language-plaintext highlighter-rouge">limit_req zone=name [burst=number] [nodelay | delay=number];</code><li>Context : <code class="language-plaintext highlighter-rouge">http</code>, <code class="language-plaintext highlighter-rouge">server</code>, <code class="language-plaintext highlighter-rouge">location</code></ul><p><strong>burst</strong></p><ul><li>만약 위 같은 예시에서 동일한 IP에서 100ms 이내에 2개의 요청이 들어오면, NGINX는 두 번째 요청에 대해 503 (Service Temporarily Unavailable) 응답을 보냄<ul><li>다른 응답 코드를 보내고 싶으면 <a href="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_status">limit_req_status</a> 활용</ul><li>하지만 대부분의 애플리케이션은 <strong>순간적으로 요청이 몰리는 현상(burst)</strong>이 발생</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>location /login/ {
    limit_req zone=mylimit burst=20;

    proxy_pass http://my_upstream;
}
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">burst=20</code> : 지정된 속도(예: 초당 10회 요청)를 초과하는 최대 20개의 요청까지 큐에 저장 가능<ul><li>예를 들어, 동시에 21개의 요청이 들어오면:<ul><li>첫 번째 요청은 즉시 처리나머지 20개 요청은 큐에 저장<li>이후 100ms마다 하나씩 처리됨 (설정된 속도: 10r/s에 맞춰)<li>만약 큐가 꽉 찬 상태에서 또 요청이 들어오면, 그 요청은 503 에러로 거부됨</ul></ul></ul><p><strong>nodelay</strong></p><ul><li>burst 설정은 요청을 일정 간격으로 처리하므로 트래픽이 부드럽게 흐르지만, 사용자 입장에서는 사이트가 느려진 것처럼 느껴질 수 있다.<li>예를 들어 큐의 마지막 요청(20번째)은 최대 2초까지 기다려야 하며, 이 응답은 이미 쓸모 없어졌을 수도 있다.</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>location /login/ {
    limit_req zone=mylimit burst=20 nodelay;

    proxy_pass http://my_upstream;
}
</pre></table></code></div></div><ul><li>nodelay는 큐 슬롯은 유지하지만, 큐에 넣은 요청을 즉시 처리<li>단, 속도 제한은 여전히 적용되며, 슬롯을 차지한 후 일정 시간(예: 100ms)이 지나야 슬롯이 다시 사용 가능<ul><li>즉, 매100ms마다 슬롯 한 개를 비움</ul></ul><p><strong>예시 상황</strong></p><ol><li>큐가 비어 있는 상태에서 IP 하나가 동시에 21개의 요청을 보냄<ul><li>21개 모두 즉시 처리<li>이 중 20개는 큐 슬롯을 <strong>‘점유 중’</strong>으로 표시<li>슬롯은 이후 100ms마다 하나씩 해제됨</ul><li>501ms 후 20개 요청이 들어옴<ul><li>슬롯 5개가 해제되어 있음<li>5개 요청 처리, 15개 요청 거부 (503)</ul></ol><p><strong>delay</strong></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>limit_req_zone $binary_remote_addr zone=ip:10m rate=5r/s;

server {
    listen 80;
    location / {
        limit_req zone=ip burst=12 delay=8;
        proxy_pass http://website;
    }
}
</pre></table></code></div></div><ul><li>delay를 지정하면 일정 개수까지는 바로 처리하고, 나머지는 초당 요청 제한(rate)을 지키며 처리</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://cdn.jsdelivr.net/gh/zz9z9/zz9z9.github.io@master/assets/img/nginx-rate-limiting-img1.png" alt="image" /></p><figure align="center"><figcaption align="center">출처 : <a href="https://blog.nginx.org/blog/rate-limiting-nginx" target="_blank"> https://blog.nginx.org/blog/rate-limiting-nginx</a></figcaption></figure><h3 id="특정-ip-별도-처리">특정 IP 별도 처리</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>geo $limit {
    default 1;
    10.0.0.0/8 0;
    192.168.0.0/24 0;
}

map $limit $limit_key {
    0 "";
    1 $binary_remote_addr;
}

limit_req_zone $limit_key zone=req_zone:10m rate=5r/s;

server {
    location / {
        limit_req zone=req_zone burst=10 nodelay;

        # ...
    }
}
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">geo</code><ul><li>클라이언트 IP를 기반으로 <code class="language-plaintext highlighter-rouge">$limit</code> 변수 값을 설정<li>10.0.0.0/8 및 192.168.0.0/24 대역에 속한 IP는 <code class="language-plaintext highlighter-rouge">$limit</code> = 0<li>그 외 IP는 <code class="language-plaintext highlighter-rouge">$limit</code> = 1 (기본값)</ul><li><code class="language-plaintext highlighter-rouge">map</code><ul><li><code class="language-plaintext highlighter-rouge">$limit</code> 값을 기준으로 <code class="language-plaintext highlighter-rouge">$limit_key</code>를 설정<ul><li><code class="language-plaintext highlighter-rouge">$limit == 0</code> → <code class="language-plaintext highlighter-rouge">$limit_key = ""</code> (빈 문자열)<li><code class="language-plaintext highlighter-rouge">$limit == 1</code> → <code class="language-plaintext highlighter-rouge">$limit_key = $binary_remote_addr</code></ul></ul><li><code class="language-plaintext highlighter-rouge">limit_req_zone</code><ul><li><code class="language-plaintext highlighter-rouge">$limit_key</code>를 기준으로 요청 속도를 제한<li>키가 빈 문자열(““)이면 속도 제한이 적용되지 않음<ul><li>즉, 허용된 IP(allowlist)는 제한 없이 통과되고, 나머지는 초당 5건으로 제한됨</ul></ul></ul><h3 id="여러-개의-limit_req-디렉티브를-동시에-사용">여러 개의 limit_req 디렉티브를 동시에 사용</h3><ul><li>각 제한이 서로 충돌하면: <strong>가장 강한 제한(최소 속도 or 가장 긴 지연)</strong>이 적용됨</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>http {
    limit_req_zone $limit_key zone=req_zone:10m rate=5r/s;
    limit_req_zone $binary_remote_addr zone=req_zone_wl:10m rate=15r/s;

    server {
        location / {
            limit_req zone=req_zone burst=10 nodelay;
            limit_req zone=req_zone_wl burst=20 nodelay;
            # ...
        }
    }
}
</pre></table></code></div></div><div class="table-wrapper"><table><thead><tr><th>대상 IP<th>req_zone (5r/s) 적용<th>req_zone_wl (15r/s) 적용<th>실제 제한<tbody><tr><td>허용된 IP<td>X (key가 “”)<td>O (binary IP로 적용됨)<td>15r/s 제한<tr><td>허용되지 않은 IP<td>O<td>O<td>5r/s 제한 (더 엄격한 제한 적용됨)</table></div><h2 id="드는-생각">드는 생각</h2><p><strong>1. 정확한 요청 수로 제한해야하는 경우에는 적합하지 않은 것 같다.</strong></p><ul><li>예를 들어, <strong>1초에 최대 1000개의 요청을 허용</strong>하는 것을 기대하고 <code class="language-plaintext highlighter-rouge">1000r/s</code>로 세팅한 경우, <code class="language-plaintext highlighter-rouge">busrt</code>, <code class="language-plaintext highlighter-rouge">nodelay</code>를 사용하면 한번에 동시에 1000개 요청이 업스트림 서버로 전달될 수 있지만, 0.99초에 1000개가 한번에 들어오고 1.01초에 1000개가 또 들어오면 아직 점유된 슬롯들이 대부분 해제되지 않은 상태라 대부분의 요청이 거절될 것<li>또한, <code class="language-plaintext highlighter-rouge">limit_req_zone</code>의 sync 설명에서처럼 요청량이 많은 상황에서 공유 메모리가 어느정도로 잘 동기화 되는지는 미지수인 것 같음<li>가장 길게 줄 수 있는 지연이 <code class="language-plaintext highlighter-rouge">1r/m</code> 이기 때문에 그 이상으로 제한하기는 어렵다.<li><code class="language-plaintext highlighter-rouge">rate=1r/60m</code> 이런식의 설정이 안되는 이유 (아래 코드 참고, <code class="language-plaintext highlighter-rouge">r/s</code>, <code class="language-plaintext highlighter-rouge">r/m</code>만 가능)</ul><p>※ <a href="https://github.com/nginx/nginx/blob/master/src/http/modules/ngx_http_limit_req_module.c">ngx_http_limit_req_module.c</a></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre>// ngx_http_limit_req_module.c
static char *ngx_http_limit_req_zone(ngx_conf_t *cf, ngx_command_t *cmd, void *conf)
{
    ...

      if (ngx_strncmp(value[i].data, "rate=", 5) == 0) {
          len = value[i].len;
          p = value[i].data + len - 3;

          if (ngx_strncmp(p, "r/s", 3) == 0) {
              scale = 1;
              len -= 3;

          } else if (ngx_strncmp(p, "r/m", 3) == 0) {
              scale = 60;
              len -= 3;
          }

          rate = ngx_atoi(value[i].data + 5, len - 5);
          if (rate &lt;= 0) {
              ngx_conf_log_error(NGX_LOG_EMERG, cf, 0,
                                 "invalid rate \"%V\"", &amp;value[i]);
        return NGX_CONF_ERROR;
      }

      continue;
  }

  ...
}
</pre></table></code></div></div><p><strong>2. 1차적인 어뷰징 방지 수단으로는 적절할 수 있을 것 같다.</strong></p><ul><li>예를 들어 웹사이트의 메인 페이지에서 로그인하지 않아도 이용할 수 있는 기능들이 있을 때, (사용자에 의해서든, 봇에 의해서든) 불필요하게 많이 호출되는 것을 방지하기 위해 IP 기반으로 처리율을 제한하면 불필요하게 업스트림 서버까지 요청이 가는 것을 어느정도는 막을 수 있을 것으로 생각</ul><h2 id="참고-자료">참고 자료</h2><ul><li><a href="https://blog.nginx.org/blog/rate-limiting-nginx">https://blog.nginx.org/blog/rate-limiting-nginx</a><li><a href="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_zone">https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req_zone</a><li><a href="https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req">https://nginx.org/en/docs/http/ngx_http_limit_req_module.html#limit_req</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EC%A7%80%EC%8B%9D-%EB%8D%94%ED%95%98%EA%B8%B0/'>지식 더하기</a>, <a href='/categories/%EC%9D%B4%EB%A1%A0/'>이론</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/web/" class="post-tag no-text-decoration" >WEB</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=WEB - nginx 처리율 제한 살펴보기 - zz9z9&url=https://zz9z9.github.io/posts/nginx-rate-limiting/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=WEB - nginx 처리율 제한 살펴보기 - zz9z9&u=https://zz9z9.github.io/posts/nginx-rate-limiting/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=WEB - nginx 처리율 제한 살펴보기 - zz9z9&url=https://zz9z9.github.io/posts/nginx-rate-limiting/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/daily-note-251016/">오늘 드는 생각 (251016, 은탄환)</a><li><a href="/posts/daily-note-251015/">오늘 드는 생각 (251015, 일과 공부)</a><li><a href="/posts/thinking-about-maintenance/">유지보수하기 어렵다 ?</a><li><a href="/posts/mysql-nested-loop-join/">MySQL - Nested-Loop Join 알아보기</a><li><a href="/posts/mysql-hash-join/">MySQL - Hash Join 알아보기</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/web/">WEB</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/http/">HTTP</a> <a class="post-tag" href="/tags/spring-batch/">Spring Batch</a> <a class="post-tag" href="/tags/oop/">OOP</a> <a class="post-tag" href="/tags/mybatis/">MyBatis</a> <a class="post-tag" href="/tags/os/">OS</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/content-delivery-network/"><div class="card-body"> <span class="timeago small" > Sep 11, 2021 <i class="unloaded">2021-09-11T00:25:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>WEB - CDN(Content Delivery Network)</h3><div class="text-muted small"><p> 들어가기 전 얼마전 면접에서 ‘화면의 초기 로딩 속도가 느리다면 어떻게 해결할 수 있을까요?’ 라는 질문에 제대로 대답하지 못했던 기억이 있다. 뒤늦게 생각났는데 CDN을 활용하면 어느정도 개선되지 않을까 하는 생각이 들었다. 하지만, CDN에 대해 어렴풋이 알고있어 얘기를 꺼내지 못했다. 이번 기회에 CDN에 대해 잘 정리해보자. CDN이란 ?...</p></div></div></a></div><div class="card"> <a href="/posts/content-security-policy/"><div class="card-body"> <span class="timeago small" > Mar 15 <i class="unloaded">2025-03-15T22:25:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>WEB - Content-Security-Policy(CSP) 살펴보기</h3><div class="text-muted small"><p> Content-Security-Policy ? 콘텐츠 보안 정책(CSP)은 특정 유형의 보안 위협의 위험을 방지하거나 최소화하는 데 도움이 되는 기능으로 웹사이트에서 브라우저로 보내는 일련의 지침으로 구성되어 있으며, 브라우저에서 코드가 수행할 수 있는 작업에 제한을 두도록 지시 CSP 전달 방식 HTTP 응답 헤더 ...</p></div></div></a></div><div class="card"> <a href="/posts/content-disposition-header/"><div class="card-body"> <span class="timeago small" > Aug 5 <i class="unloaded">2025-08-05T21:25:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>WEB - HTTP Content-Disposition 헤더</h3><div class="text-muted small"><p> Content-Disposition 헤더 콘텐츠를 브라우저에서 웹페이지로 직접 표시할지, 아니면 첨부파일로 다운로드할지를 지정 1 2 3 4 Content-Disposition: inline Content-Disposition: attachment Content-Disposition: attachment; filename="file name....</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/how-to-deal-with-null/" class="btn btn-outline-primary" prompt="Older"><p>자바에서 null 처리에 대해 생각해보기</p></a> <a href="/posts/spring-transactional-part1/" class="btn btn-outline-primary" prompt="Newer"><p>Spring - @Transactional 살펴보기 (1) - AOP Proxy</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Lee JaeYoon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/web/">WEB</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/http/">HTTP</a> <a class="post-tag" href="/tags/spring-batch/">Spring Batch</a> <a class="post-tag" href="/tags/oop/">OOP</a> <a class="post-tag" href="/tags/mybatis/">MyBatis</a> <a class="post-tag" href="/tags/os/">OS</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://zz9z9.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
