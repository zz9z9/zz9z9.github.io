<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ?" /><meta property="og:locale" content="en_US" /><meta name="description" content="들어가기 전 실무에서는 equals(), hashCode() 메서드를 오버라이드 할 일이 별로 없었던 것 같다. 하지만 몇 달 전 간단한 웹 서버를 만들어보는 토이 프로젝트를 진행하던 중, 클라이언트로부터 받은 요청을 유틸 클래스의 메서드를 사용해서 HttpRequest 객체를 만드는 부분에 대한 테스트 코드를 작성했는데 원하는 결과가 나오지 않았다.객체간의 비교를 수행했는데 equals()가 오버라이드 되지 않아 발생했던 문제였다. 그런데 equals()를 오버라이드하면 hashCode()도 반드시 함께 오버라이드 해야한다고 한다. 왜 그래야하는 것인지 살펴보자. ※ 작성했던 테스트 코드 ```java @Test public void getHttpRequest() throws Exception { Map&lt;String, HttpRequest&gt; requests = new HashMap&lt;&gt;(); String request1 = “GET /index.html HTTP/1.1”; String request2 = “POST /user/create HTTP/1.1”; requests.put(request1, new HttpRequest(GET, “/index.html”)); requests.put(request2, new HttpRequest(POST, “/user/create”));" /><meta property="og:description" content="들어가기 전 실무에서는 equals(), hashCode() 메서드를 오버라이드 할 일이 별로 없었던 것 같다. 하지만 몇 달 전 간단한 웹 서버를 만들어보는 토이 프로젝트를 진행하던 중, 클라이언트로부터 받은 요청을 유틸 클래스의 메서드를 사용해서 HttpRequest 객체를 만드는 부분에 대한 테스트 코드를 작성했는데 원하는 결과가 나오지 않았다.객체간의 비교를 수행했는데 equals()가 오버라이드 되지 않아 발생했던 문제였다. 그런데 equals()를 오버라이드하면 hashCode()도 반드시 함께 오버라이드 해야한다고 한다. 왜 그래야하는 것인지 살펴보자. ※ 작성했던 테스트 코드 ```java @Test public void getHttpRequest() throws Exception { Map&lt;String, HttpRequest&gt; requests = new HashMap&lt;&gt;(); String request1 = “GET /index.html HTTP/1.1”; String request2 = “POST /user/create HTTP/1.1”; requests.put(request1, new HttpRequest(GET, “/index.html”)); requests.put(request2, new HttpRequest(POST, “/user/create”));" /><link rel="canonical" href="https://zz9z9.github.io/posts/equals-and-hashcode/" /><meta property="og:url" content="https://zz9z9.github.io/posts/equals-and-hashcode/" /><meta property="og:site_name" content="zz9z9" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-09-24T22:25:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ?" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-09-24T22:25:00+09:00","datePublished":"2021-09-24T22:25:00+09:00","description":"들어가기 전 실무에서는 equals(), hashCode() 메서드를 오버라이드 할 일이 별로 없었던 것 같다. 하지만 몇 달 전 간단한 웹 서버를 만들어보는 토이 프로젝트를 진행하던 중, 클라이언트로부터 받은 요청을 유틸 클래스의 메서드를 사용해서 HttpRequest 객체를 만드는 부분에 대한 테스트 코드를 작성했는데 원하는 결과가 나오지 않았다.객체간의 비교를 수행했는데 equals()가 오버라이드 되지 않아 발생했던 문제였다. 그런데 equals()를 오버라이드하면 hashCode()도 반드시 함께 오버라이드 해야한다고 한다. 왜 그래야하는 것인지 살펴보자. ※ 작성했던 테스트 코드 ```java @Test public void getHttpRequest() throws Exception { Map&lt;String, HttpRequest&gt; requests = new HashMap&lt;&gt;(); String request1 = “GET /index.html HTTP/1.1”; String request2 = “POST /user/create HTTP/1.1”; requests.put(request1, new HttpRequest(GET, “/index.html”)); requests.put(request2, new HttpRequest(POST, “/user/create”));","headline":"Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ?","mainEntityOfPage":{"@type":"WebPage","@id":"https://zz9z9.github.io/posts/equals-and-hashcode/"},"url":"https://zz9z9.github.io/posts/equals-and-hashcode/"}</script><title>Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ? | zz9z9</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="zz9z9"><meta name="application-name" content="zz9z9"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Q7PWLG5WYT"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Q7PWLG5WYT'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Soccerball.svg/1000px-Soccerball.svg.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">zz9z9</a></div><div class="site-subtitle font-italic">거창한 계획보다는, 꾸준한 실행을</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/zz9z9" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ?</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ?</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Lee JaeYoon </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, Sep 24, 2021, 10:25 PM +0900" prep="on" > Sep 24, 2021 <i class="unloaded">2021-09-24T22:25:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1707 words">9 min</span></div></div><div class="post-content"><h1 id="들어가기-전">들어가기 전</h1><hr /><p>실무에서는 <code class="language-plaintext highlighter-rouge">equals()</code>, <code class="language-plaintext highlighter-rouge">hashCode()</code> 메서드를 오버라이드 할 일이 별로 없었던 것 같다. 하지만 몇 달 전 간단한 웹 서버를 만들어보는 토이 프로젝트를 진행하던 중, 클라이언트로부터 받은 요청을 유틸 클래스의 메서드를 사용해서 <code class="language-plaintext highlighter-rouge">HttpRequest</code> 객체를 만드는 부분에 대한 테스트 코드를 작성했는데 원하는 결과가 나오지 않았다.객체간의 비교를 수행했는데 <code class="language-plaintext highlighter-rouge">equals()</code>가 오버라이드 되지 않아 발생했던 문제였다. 그런데 <code class="language-plaintext highlighter-rouge">equals()</code>를 오버라이드하면 <code class="language-plaintext highlighter-rouge">hashCode()</code>도 반드시 함께 오버라이드 해야한다고 한다. 왜 그래야하는 것인지 살펴보자. <br /><br /> <strong>※ 작성했던 테스트 코드</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">getHttpRequest</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">HttpRequest</span><span class="o">&gt;</span> <span class="n">requests</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
    <span class="nc">String</span> <span class="n">request1</span> <span class="o">=</span> <span class="s">"GET /index.html HTTP/1.1"</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">request2</span> <span class="o">=</span> <span class="s">"POST /user/create HTTP/1.1"</span><span class="o">;</span>
    <span class="n">requests</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">request1</span><span class="o">,</span> <span class="k">new</span> <span class="nc">HttpRequest</span><span class="o">(</span><span class="no">GET</span><span class="o">,</span> <span class="s">"/index.html"</span><span class="o">));</span>
    <span class="n">requests</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">request2</span><span class="o">,</span> <span class="k">new</span> <span class="nc">HttpRequest</span><span class="o">(</span><span class="no">POST</span><span class="o">,</span> <span class="s">"/user/create"</span><span class="o">));</span>

    <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">req</span> <span class="o">:</span> <span class="n">requests</span><span class="o">.</span><span class="na">keySet</span><span class="o">())</span> <span class="o">{</span>
        <span class="nc">HttpRequest</span> <span class="n">answer</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>
        <span class="nc">HttpRequest</span> <span class="n">getObj</span> <span class="o">=</span> <span class="nc">HttpRequestUtils</span><span class="o">.</span><span class="na">getHttpRequest</span><span class="o">(</span><span class="k">new</span> <span class="nc">ByteArrayInputStream</span><span class="o">(</span><span class="n">req</span><span class="o">.</span><span class="na">getBytes</span><span class="o">()));</span>

        <span class="n">assertThat</span><span class="o">(</span><span class="n">getObj</span><span class="o">,</span> <span class="n">is</span><span class="o">(</span><span class="n">answer</span><span class="o">));</span> <span class="c1">// equals 오버라이드 전 원하는 결과가 나오지 않았음</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h1 id="equals">equals()</h1><hr /><blockquote><p>Object 클래스에서의 <code class="language-plaintext highlighter-rouge">equals()</code> 메서드는 기본적으로 ‘==’ 연산자를 통해 메모리 주소 비교(동일성 비교)를 한다.</p></blockquote><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">obj</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>equals 메소드는 null이 아닌 객체에 대해 아래의 등가 관계가 성립되어야 한다.<ul><li>reflexive : <code class="language-plaintext highlighter-rouge">x.equals(x)</code>는 항상 성립한다.<li>symmetric : <code class="language-plaintext highlighter-rouge">x.equals(y)</code>와 <code class="language-plaintext highlighter-rouge">y.equals(x)</code>는 동일한 결과를 반환한다.<li>transitive : <code class="language-plaintext highlighter-rouge">x.equals(y)</code>가 성립하면 <code class="language-plaintext highlighter-rouge">y.equals(z)</code>도 성립한다.<li>consistent : <code class="language-plaintext highlighter-rouge">equals()</code>의 값은 <code class="language-plaintext highlighter-rouge">equals()</code>에 포함된 속성이 변경되는 경우에만 변경되어야 한다.</ul></ul><h2 id="위-규칙을-위반하는-예시xequalsyyequalsx-인-경우">위 규칙을 위반하는 예시(<code class="language-plaintext highlighter-rouge">x.equals(y)!=y.equals(x)</code> 인 경우)</h2><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Money</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">amount</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">currencyCode</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(!(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="nc">Money</span><span class="o">))</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="nc">Money</span> <span class="n">other</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Money</span><span class="o">)</span><span class="n">o</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">currencyCodeEquals</span> <span class="o">=</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">currencyCode</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">other</span><span class="o">.</span><span class="na">currencyCode</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
          <span class="o">||</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">currencyCode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">currencyCode</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">currencyCode</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">amount</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="na">amount</span> <span class="o">&amp;&amp;</span> <span class="n">currencyCodeEquals</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">WrongVoucher</span> <span class="kd">extends</span> <span class="nc">Money</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">store</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(!(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="nc">WrongVoucher</span><span class="o">))</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="nc">WrongVoucher</span> <span class="n">other</span> <span class="o">=</span> <span class="o">(</span><span class="nc">WrongVoucher</span><span class="o">)</span><span class="n">o</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">currencyCodeEquals</span> <span class="o">=</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">currencyCode</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">other</span><span class="o">.</span><span class="na">currencyCode</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
          <span class="o">||</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">currencyCode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">currencyCode</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">currencyCode</span><span class="o">));</span>
        <span class="kt">boolean</span> <span class="n">storeEquals</span> <span class="o">=</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">store</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">other</span><span class="o">.</span><span class="na">store</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
          <span class="o">||</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">store</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">store</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">store</span><span class="o">));</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">amount</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="na">amount</span> <span class="o">&amp;&amp;</span> <span class="n">currencyCodeEquals</span> <span class="o">&amp;&amp;</span> <span class="n">storeEquals</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nc">Money</span> <span class="n">cash</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Money</span><span class="o">(</span><span class="mi">42</span><span class="o">,</span> <span class="s">"USD"</span><span class="o">);</span>
<span class="nc">WrongVoucher</span> <span class="n">voucher</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WrongVoucher</span><span class="o">(</span><span class="mi">42</span><span class="o">,</span> <span class="s">"USD"</span><span class="o">,</span> <span class="s">"Amazon"</span><span class="o">);</span>

<span class="n">voucher</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">cash</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="kc">false</span> <span class="c1">// As expected.</span>
<span class="n">cash</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">voucher</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="kc">true</span> <span class="c1">// That's wrong.</span>
</pre></table></code></div></div><h2 id="동등성equality과-동일성identity">동등성(equality)과 동일성(identity)</h2><blockquote><p>실생활의 예를 생각해본다면, 같은 날 입대한 두 군인의 경우 ‘동등한’ 훈련병의 입장이라고 생각할 수 있다. <br /> 하지만, 두 훈련병은 각각 다른 사람이기에 ‘동일’하진 않다.</p></blockquote><ul><li>동등성(equality)<ul><li>두 객체가 동일한 상태(속성)를 포함하는지 여부</ul><li>동일성(identity)<ul><li>두 객체가 동일한 메모리 주소를 공유하는지 여부</ul><li>두 객체가 동일하면 동등하지만, 동등하다고 해서 동일하지는 않다.</ul><h1 id="hashcode">hashCode()</h1><hr /><blockquote><p>객체에 대한 해시 코드 값을 반환한다. 이 값은 해시 테이블을 사용할 때 주어진 키에 대한 해시 값으로 사용된다. 이를 활용해 데이터에 효율적으로 접근하기 위해, 해당 값을 사용하여 데이터를 저장한다.</p></blockquote><ul><li><code class="language-plaintext highlighter-rouge">hashCode()</code> 메서드는 가상 머신에 의해 native operation으로 구현된다. <code class="language-plaintext highlighter-rouge">hashCode()</code> 값은 (32비트 아키텍처에서) 메모리 참조 또는 (64비트 아키텍처에서) 메모리 참조에 대한 modulo 32 표현을 반환하는 것으로 구현되는 경우가 많다.</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">native</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">();</span>
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">hashCode()</code>가 준수해야 할 사항은 다음과 같다.<ul><li>internal consistency : <code class="language-plaintext highlighter-rouge">hashCode()</code>의 값은 <code class="language-plaintext highlighter-rouge">equals()</code>에서 비교하는 속성이 변경되는 경우에만 변경될 수 있다.<li>equals consistency : <code class="language-plaintext highlighter-rouge">x.equals(y)</code>이면 x,y의 <code class="language-plaintext highlighter-rouge">hashCode()</code>는 동일한 값을 반환해야 한다.<li>collisions : <code class="language-plaintext highlighter-rouge">x.equals(y)</code>가 성립하지 않더라도 x,y의 <code class="language-plaintext highlighter-rouge">hashCode()</code>는 동일한 값을 반환할 수도 있다.</ul></ul><h2 id="equals와-hashcode를-함께-오버라이드-해야하는-이유">equals()와 hashCode()를 함께 오버라이드 해야하는 이유</h2><ul><li><code class="language-plaintext highlighter-rouge">hashCode()</code>가 준수해야 할 사항의 두 번째 항목을 주목해보자. 만약, 어떤 클래스에서 <code class="language-plaintext highlighter-rouge">equals()</code> 메서드만 오버라이드 되었다면 <code class="language-plaintext highlighter-rouge">x.equals(y)</code>가 성립하더라도 x,y의 <code class="language-plaintext highlighter-rouge">hashCode()</code> 값은 다를 것이다.</ul><p><strong><em>이런 상황으로 인해 발생되는 문제는 ?</em></strong> <br /> <strong><em>→ 해시맵을 사용할 때 의도치 않은 결과를 얻게된다.</em></strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Team</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">city</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">department</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Team</span><span class="o">(</span><span class="nc">String</span> <span class="n">city</span><span class="o">,</span> <span class="nc">String</span> <span class="n">department</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">=</span> <span class="n">city</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">department</span> <span class="o">=</span> <span class="n">department</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="k">this</span><span class="o">)</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(!(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="nc">Team</span><span class="o">))</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="nc">Team</span> <span class="n">other</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Team</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
        <span class="kt">boolean</span> <span class="n">isSameCity</span> <span class="o">=</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">other</span><span class="o">.</span><span class="na">city</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
                <span class="o">||</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">city</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">city</span><span class="o">));</span>
        <span class="kt">boolean</span> <span class="n">isSameDept</span> <span class="o">=</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">department</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">other</span><span class="o">.</span><span class="na">department</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
                <span class="o">||</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">department</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">department</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">department</span><span class="o">));</span>
        <span class="k">return</span> <span class="n">isSameCity</span> <span class="o">&amp;&amp;</span> <span class="n">isSameDept</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Team</span><span class="o">,</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">leaders</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">leaders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="k">new</span> <span class="nc">Team</span><span class="o">(</span><span class="s">"New York"</span><span class="o">,</span> <span class="s">"development"</span><span class="o">),</span> <span class="s">"Anne"</span><span class="o">);</span>
<span class="n">leaders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="k">new</span> <span class="nc">Team</span><span class="o">(</span><span class="s">"Boston"</span><span class="o">,</span> <span class="s">"development"</span><span class="o">),</span> <span class="s">"Brian"</span><span class="o">);</span>
<span class="n">leaders</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="k">new</span> <span class="nc">Team</span><span class="o">(</span><span class="s">"Boston"</span><span class="o">,</span> <span class="s">"marketing"</span><span class="o">),</span> <span class="s">"Charlie"</span><span class="o">);</span>

<span class="nc">Team</span> <span class="n">myTeam</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Team</span><span class="o">(</span><span class="s">"New York"</span><span class="o">,</span> <span class="s">"development"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">myTeamLeader</span> <span class="o">=</span> <span class="n">leaders</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">myTeam</span><span class="o">);</span> <span class="c1">// "Anne"를 기대하지만 결과는 null이 나온다.</span>
</pre></table></code></div></div><h1 id="equals-hashcode-작성하기">equals(), hashCode() 작성하기</h1><hr /><blockquote><p>일반적으로 직접 일일이 작성하진 않고, IDE의 자동완성이나 Lombok 또는 Java7 부터 도입된 java.util 패키지의 Objects 클래스의 메서드를 활용한다.</p></blockquote><h2 id="intellij-default">IntelliJ Default</h2><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">Team</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">city</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">department</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Team</span><span class="o">(</span><span class="nc">String</span> <span class="n">city</span><span class="o">,</span> <span class="nc">String</span> <span class="n">department</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">=</span> <span class="n">city</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">department</span> <span class="o">=</span> <span class="n">department</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">o</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>

        <span class="nc">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Team</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">city</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="o">!</span><span class="n">city</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">city</span><span class="o">)</span> <span class="o">:</span> <span class="n">team</span><span class="o">.</span><span class="na">city</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">department</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">department</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">team</span><span class="o">.</span><span class="na">department</span><span class="o">)</span> <span class="o">:</span> <span class="n">team</span><span class="o">.</span><span class="na">department</span> <span class="o">==</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">city</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">city</span><span class="o">.</span><span class="na">hashCode</span><span class="o">()</span> <span class="o">:</span> <span class="mi">0</span><span class="o">;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="mi">31</span> <span class="o">*</span> <span class="n">result</span> <span class="o">+</span> <span class="o">(</span><span class="n">department</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="n">department</span><span class="o">.</span><span class="na">hashCode</span><span class="o">()</span> <span class="o">:</span> <span class="mi">0</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="objects-유틸-활용">Objects 유틸 활용</h2><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.util.Objects</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Team</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">city</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">department</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Team</span><span class="o">(</span><span class="nc">String</span> <span class="n">city</span><span class="o">,</span> <span class="nc">String</span> <span class="n">department</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">=</span> <span class="n">city</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">department</span> <span class="o">=</span> <span class="n">department</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">o</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">getClass</span><span class="o">()</span> <span class="o">!=</span> <span class="n">o</span><span class="o">.</span><span class="na">getClass</span><span class="o">())</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="nc">Team</span> <span class="n">team</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Team</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
        <span class="k">return</span> <span class="nc">Objects</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">city</span><span class="o">,</span> <span class="n">team</span><span class="o">.</span><span class="na">city</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
                <span class="nc">Objects</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">department</span><span class="o">,</span> <span class="n">team</span><span class="o">.</span><span class="na">department</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">Objects</span><span class="o">.</span><span class="na">hash</span><span class="o">(</span><span class="n">city</span><span class="o">,</span> <span class="n">department</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="lombok-활용">Lombok 활용</h2><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">lombok.EqualsAndHashCode</span><span class="o">;</span>

<span class="nd">@EqualsAndHashCode</span>
<span class="kd">class</span> <span class="nc">Team</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">city</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">department</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Team</span><span class="o">(</span><span class="nc">String</span> <span class="n">city</span><span class="o">,</span> <span class="nc">String</span> <span class="n">department</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">=</span> <span class="n">city</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">department</span> <span class="o">=</span> <span class="n">department</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h1 id="참고-자료">참고 자료</h1><hr /><ul><li><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode()">https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode()</a><li><a href="https://stackoverflow.com/questions/1692863/what-is-the-difference-between-identity-and-equality-in-oop">https://stackoverflow.com/questions/1692863/what-is-the-difference-between-identity-and-equality-in-oop</a><li><a href="https://www.baeldung.com/java-equals-hashcode-contracts">https://www.baeldung.com/java-equals-hashcode-contracts</a><li><a href="https://www.javacodegeeks.com/2016/03/equality-vs-identity.html">https://www.javacodegeeks.com/2016/03/equality-vs-identity.html</a><li><a href="https://www.baeldung.com/java-hashcode">https://www.baeldung.com/java-hashcode</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EC%A7%80%EC%8B%9D-%EB%8D%94%ED%95%98%EA%B8%B0/'>지식 더하기</a>, <a href='/categories/%EC%9D%B4%EB%A1%A0/'>이론</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ? - zz9z9&url=https://zz9z9.github.io/posts/equals-and-hashcode/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ? - zz9z9&u=https://zz9z9.github.io/posts/equals-and-hashcode/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Java - 왜 equals()와 hashCode()는 함께 오버라이딩 해야할까 ? - zz9z9&url=https://zz9z9.github.io/posts/equals-and-hashcode/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/daily-note-251016/">오늘 드는 생각 (251016, 은탄환)</a><li><a href="/posts/daily-note-251015/">오늘 드는 생각 (251015, 일과 공부)</a><li><a href="/posts/thinking-about-maintenance/">유지보수하기 어렵다 ?</a><li><a href="/posts/mysql-nested-loop-join/">MySQL - Nested-Loop Join 알아보기</a><li><a href="/posts/mysql-hash-join/">MySQL - Hash Join 알아보기</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/web/">WEB</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/http/">HTTP</a> <a class="post-tag" href="/tags/spring-batch/">Spring Batch</a> <a class="post-tag" href="/tags/oop/">OOP</a> <a class="post-tag" href="/tags/mybatis/">MyBatis</a> <a class="post-tag" href="/tags/os/">OS</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/heap-size-and-oome/"><div class="card-body"> <span class="timeago small" > Jul 20, 2021 <i class="unloaded">2021-07-20T23:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java - 자바 힙 메모리 사이즈와 OutOfMemoryError</h3><div class="text-muted small"><p> 지금까지 OutOfMemoryError(OOM)을 만나게 되면, 정확한 진단없이 그냥 성능 팀에서 하라는 대로 Xms, Xmx 옵션을 활용해서 힙 크기를 조절했던 것 같다. 내가 스스로 판단할 수 있게끔 지식을 갖추고 연습해보자. 힙 메모리 사이즈 기본값 공식 문서 에 보면 default로 세팅되는 초기 힙사이즈와 최대 힙사이즈에 대해 나와...</p></div></div></a></div><div class="card"> <a href="/posts/heap-analyze-with-jmap-and-mat/"><div class="card-body"> <span class="timeago small" > Jul 20, 2021 <i class="unloaded">2021-07-20T23:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java - 자바 메모리 단면 분석하기</h3><div class="text-muted small"><p> 언제 메모리 단면을 분석해야할까 ? 메모리 단면인 ‘힙 덤프(Heap Dump)’는 생성하는데 비용이 비싸기 때문에, 메모리가 부족해지는 현상이 지속해서 발생하거나 OOM 에러가 발생했을 때 생성해야 한다. 여기서 말하는 비용이란 다음과 같다 덤프 파일을 생성하는 동안 서비스가 불가능한 상황이 된다. 덤프 생성시 많은 시간이 소요될 수 있...</p></div></div></a></div><div class="card"> <a href="/posts/excel-using-poi-library/"><div class="card-body"> <span class="timeago small" > Jul 22, 2021 <i class="unloaded">2021-07-22T00:29:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java - 자바로 엑셀을 만들기 위한 POI 라이브러리 살펴보기</h3><div class="text-muted small"><p> 회사 프로젝트에서 조회한 화면에 대해 엑셀 파일로 다운받게 만들어주는 기능을 구현해야 했다. 방법을 찾다보니 POI 라이브러리라는게 있었고 이를 활용해서 구현할 수 있었다. 하지만, 다른 파트에서 해당 라이브러리를 사용하다 OOM(Out Of Memory)에러가 발생했고, 구현체를 살펴보니 XSSF의 usermodel을 사용하고 있었다. 해당 파트에서...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/os-caching/" class="btn btn-outline-primary" prompt="Older"><p>OS - OS 캐시</p></a> <a href="/posts/java-spec-per-version/" class="btn btn-outline-primary" prompt="Newer"><p>Java - 자바 버전별 특징 살펴보기(JAVA 7~17)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Lee JaeYoon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/web/">WEB</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/http/">HTTP</a> <a class="post-tag" href="/tags/spring-batch/">Spring Batch</a> <a class="post-tag" href="/tags/oop/">OOP</a> <a class="post-tag" href="/tags/mybatis/">MyBatis</a> <a class="post-tag" href="/tags/os/">OS</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://zz9z9.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
