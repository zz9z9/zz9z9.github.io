<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Java - 자바 힙 메모리 사이즈와 OutOfMemoryError" /><meta property="og:locale" content="en_US" /><meta name="description" content="지금까지 OutOfMemoryError(OOM)을 만나게 되면, 정확한 진단없이 그냥 성능 팀에서 하라는 대로 Xms, Xmx 옵션을 활용해서 힙 크기를 조절했던 것 같다. 내가 스스로 판단할 수 있게끔 지식을 갖추고 연습해보자." /><meta property="og:description" content="지금까지 OutOfMemoryError(OOM)을 만나게 되면, 정확한 진단없이 그냥 성능 팀에서 하라는 대로 Xms, Xmx 옵션을 활용해서 힙 크기를 조절했던 것 같다. 내가 스스로 판단할 수 있게끔 지식을 갖추고 연습해보자." /><link rel="canonical" href="https://zz9z9.github.io/posts/heap-size-and-oome/" /><meta property="og:url" content="https://zz9z9.github.io/posts/heap-size-and-oome/" /><meta property="og:site_name" content="zz9z9" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-07-20T23:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Java - 자바 힙 메모리 사이즈와 OutOfMemoryError" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-07-20T23:00:00+09:00","datePublished":"2021-07-20T23:00:00+09:00","description":"지금까지 OutOfMemoryError(OOM)을 만나게 되면, 정확한 진단없이 그냥 성능 팀에서 하라는 대로 Xms, Xmx 옵션을 활용해서 힙 크기를 조절했던 것 같다. 내가 스스로 판단할 수 있게끔 지식을 갖추고 연습해보자.","headline":"Java - 자바 힙 메모리 사이즈와 OutOfMemoryError","mainEntityOfPage":{"@type":"WebPage","@id":"https://zz9z9.github.io/posts/heap-size-and-oome/"},"url":"https://zz9z9.github.io/posts/heap-size-and-oome/"}</script><title>Java - 자바 힙 메모리 사이즈와 OutOfMemoryError | zz9z9</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="zz9z9"><meta name="application-name" content="zz9z9"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Q7PWLG5WYT"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Q7PWLG5WYT'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Soccerball.svg/1000px-Soccerball.svg.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">zz9z9</a></div><div class="site-subtitle font-italic">거창한 계획보다는, 꾸준한 실행을</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/zz9z9" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Java - 자바 힙 메모리 사이즈와 OutOfMemoryError</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Java - 자바 힙 메모리 사이즈와 OutOfMemoryError</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Lee JaeYoon </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Jul 20, 2021, 11:00 PM +0900" prep="on" > Jul 20, 2021 <i class="unloaded">2021-07-20T23:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2384 words">13 min</span></div></div><div class="post-content"><p>지금까지 OutOfMemoryError(OOM)을 만나게 되면, 정확한 진단없이 그냥 성능 팀에서 하라는 대로 Xms, Xmx 옵션을 활용해서 힙 크기를 조절했던 것 같다. 내가 스스로 판단할 수 있게끔 지식을 갖추고 연습해보자.</p><h1 id="힙-메모리-사이즈">힙 메모리 사이즈</h1><hr /><h2 id="기본값">기본값</h2><ul><li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gc-ergonomics.html">공식 문서</a> 에 보면 default로 세팅되는 초기 힙사이즈와 최대 힙사이즈에 대해 나와있다.<li>결론부터 얘기하면, 초기 힙사이즈는 물리 메모리의 1/64, 최대 힙사이즈는 물리 메모리의 1/4이다.<li>나의 경우 RAM이 32G 이므로, 초기 힙사이즈, 최대 힙사이즈는 각각 500MB, 8GB 정도가 나와야할 것이다.<li>아래의 <code class="language-plaintext highlighter-rouge">InitialHeapSize</code>와 <code class="language-plaintext highlighter-rouge">MaxHeapSize</code>를 확인해보면 예상대로 계산되는 것을 확인할 수 있다.</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>$ java -XX:+PrintFlagsFinal -version 2&gt;&amp;1 | grep -i -E 'heapsize|metaspacesize|version'
     size_t ErgoHeapSizeLimit                        = 0                                         {product} {default}
     size_t HeapSizePerGCThread                      = 43620760                                  {product} {default}
     size_t InitialBootClassLoaderMetaspaceSize      = 4194304                                   {product} {default}
     size_t InitialHeapSize                          = 536870912                                 {product} {ergonomic}
     size_t LargePageHeapSizeThreshold               = 134217728                                 {product} {default}
     size_t MaxHeapSize                              = 8589934592                                {product} {ergonomic}
     size_t MaxMetaspaceSize                         = 18446744073709535232                      {product} {default}
     size_t MetaspaceSize                            = 21807104                               {pd product} {default}
     size_t MinHeapSize                              = 8388608                                   {product} {ergonomic}
      uintx NonNMethodCodeHeapSize                   = 5839372                                {pd product} {ergonomic}
      uintx NonProfiledCodeHeapSize                  = 122909434                              {pd product} {ergonomic}
      uintx ProfiledCodeHeapSize                     = 122909434                              {pd product} {ergonomic}
     size_t SoftMaxHeapSize                          = 8589934592                             {manageable} {ergonomic}
  java version "15.0.1" 2020-10-20
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/64415489/126507865-9dcb5218-9f74-4615-968d-dfe4061f09a8.png" width="80%" /></p><h2 id="내-애플리케이션에-적절한-힙-사이즈는-">내 애플리케이션에 적절한 힙 사이즈는 ?</h2><blockquote><p>딱 나눠 떨어지는 공식 같은 것은 없는 것 같다. 아래 사항을 참고하여 적절한 힙 사이즈를 찾기 위해 노력해보자.</p></blockquote><p>아래 내용들은 <a href="https://docs.oracle.com/cd/E13222_01/wls/docs81/perform/JVMTuning.html">공식 문서</a> 에서 발췌하였다. 해당 문서는 WebLogic Server를 기준으로 작성되었다.</p><h3 id="힙-사이즈와-gc">힙 사이즈와 GC</h3><ul><li>GC에 대한 허용 속도는 애플리케이션에 따라 다르며 GC의 실제 시간과 빈도를 분석한 후 조정해야 한다.<li>힙 크기가 클수록 Full GC 속도가 느려지고 빈도는 줄어든다. 힙 크기가 작을수록 Full GC는 빠르지만 자주 발생한다.<li>힙 크기를 조정하는 목적은 JVM이 GC 수행하는 데 드는 시간을 최소화하는 동시에, 한 번에 처리할 수 있는 클라이언트 수를 최대화하는 것이다.</ul><h3 id="verbosegc-사용하기">verbosegc 사용하기</h3><ul><li>HotSpot VM의 GC 옵션(verbosec)을 사용하면 GC에 투입되는 시간과 리소스의 양을 정확하게 측정할 수 있다.<ul><li>로그 파일을 통해 진단 결과를 확인한다.</ul><li>애플리케이션을 실행하는 동안 최대 부하에서 성능을 모니터링 한다.<li>verbosec 옵션을 사용하여 JVM에 대한 자세한 가비지 수집 출력을 켜고 표준 오류 및 표준 출력을 모두 로그 파일을 통해 다음을 확인한다.<ul><li>실행옵션 예시 : <code class="language-plaintext highlighter-rouge">-XX:+UseSerialGC -Xms1024m -Xmx1024m -verbose:gc</code><ul><li>자바9 부터는 <code class="language-plaintext highlighter-rouge">-verbose:gc</code> 옵션 대신 <code class="language-plaintext highlighter-rouge">-Xlog:gc</code>라는 옵션을 사용해야한다.</ul><li>GC 수행 빈도와 수행 시간(Full GC는 3~5초 이상 걸리지 않아야 한다.)<li>Full GC 후 사용 가능한 힙 메모리.<ul><li>힙의 85% 이상이 사용 가능한 상태라면 경우 힙 크기를 더 작게 설정하는 것을 고려해볼 수 있다.</ul></ul><li>힙 크기가 시스템에서 사용 가능한 RAM보다 크지 않아야 한다.<ul><li>시스템이 페이지를 디스크로 “swap” 하지 않도록 가능한 큰 힙 크기를 사용한다.<li>시스템의 사용 가능한 RAM 크기는 하드웨어 구성과 시스템에서 프로세스를 실행하는 데 필요한 메모리 요구 사항에 따라 달라진다.</ul><li>시스템이 GC에 너무 많은 시간을 소비하는 경우 힙 크기를 줄인다.<ul><li>일반적으로 사용 가능한 RAM의 80%(운영 체제나 다른 프로세스에서 사용하지 않음)를 JVM에 사용해야 한다.</ul></ul><h3 id="주의사항">주의사항</h3><ul><li>JVM에서 사용하는 최대 메모리 양이 사용 가능한 물리적 RAM 양을 초과하지 않도록 설정해야 한다.<ul><li>이 값을 초과하면 OS가 페이징을 시작하고 성능이 크게 저하된다.</ul><li>프로덕션 환경에서는 최소 힙 크기와 최대 힙 크기를 동일한 값으로 설정한다.<ul><li>힙을 지속적으로 늘리거나 줄이는 데 사용되는 JVM 리소스를 낭비하지 않도록 하기 위해</ul></ul><p><br /></p><h1 id="outofmemoryerror의-다양한-원인-살펴보기">OutOfMemoryError의 다양한 원인 살펴보기</h1><hr /><blockquote><p>OutOfMemoryError가 발생하는 경우는 대표적으로 다음과 같다. <br /></p><ol><li>가비지 컬렉터가 새로운 객체를 생성할 공간을 더 이상 만들어주지 못하고, 힙 영역의 메모리 또한 증가될 수 없을 때<li>네이티브 라이브러리 코드에서 스왑 영역이 부족하여, 더 이상 네이티브 할당을 할 수 없을 때</ol></blockquote><p><br /> 다양한 시스템 로그를 통해 OutOfMemoryError가 발생하는 여러가지 원인에 대해 살펴보자</p><h2 id="1-java-heap-space">1. Java heap space</h2><blockquote><p>자바의 힙 영역에서 더 이상 객체를 생성하기 어려울 때 발생한다. 이를 유발하는 다양한 케이스가 있을 수 있다.</p></blockquote><ul><li><code class="language-plaintext highlighter-rouge">Exception in thread "main".: java.lang.OutOfMemoryError: Java heap space</code><li>메모리 크기를 너무 작게 잡거나, 메모리 크기를 지정하지 않은 경우<ul><li><code class="language-plaintext highlighter-rouge">-Xms</code>, <code class="language-plaintext highlighter-rouge">-Xmx</code> 실행옵션 확인하기</ul><li>오래된 객체들이 계속 참조되고 있어 GC가 되지 않는 경우<ul><li>static을 잘못 사용하고 있진 않은지, 애플리케이션이 의도치 않게 특정 객체를 계속 참조하고 있지는 않은지 확인하기</ul><li>finalize 메서드를 개발자가 개발한 클래스에 구현해 놓은 경우<ul><li>JVM에는 GC 대상 객체들을 큐에 쌓고 처리하기 위한 데몬 스레드가 존재한다.<li>이 스레드가 객체들을 처리하기도 전에 finalize로 인해 큐에 너무 많은 객체가 보관되어 있고, 처리가 불가능한 경우 문제가 발생할 수 있다.</ul><li>스레드의 우선순위를 너무 높일 경우<ul><li>개발된 프로그램의 스레드 우선순위를 너무 높게 지정해 놓아서, 스레드를 메모리에 생성하는 속도가 GC를 처리하는 속도보다 빠르면 문제가 발생할 수 있다.</ul><li>큰 덩어리의 객체가 여러 개 있을 경우<ul><li>예를 들어, 힙 메모리를 256MB로 지정하고 한번 호출되면 100MB의 메모리를 점유하는 화면을 세 번 호출하는 경우</ul></ul><h2 id="2-metaspace-java-8-부터">2. Metaspace (Java 8 부터)</h2><blockquote><p>Java 8 부터는 Permanent이 없어지고 Metaspace가 생겼다.</p></blockquote><ul><li><code class="language-plaintext highlighter-rouge">Exception in thread "main".: java.lang.OutOfMemoryError: Metaspace</code><li>Java 8 이전의 JVM에서는 Permgen Space라는 메시지가 나왔지만, Java 8 부터는 Metaspace 에러가 발생한다.<li>너무 많은 클래스가 자바 프로세스에 로딩될 경우 발생할 수 있다.<li><code class="language-plaintext highlighter-rouge">-XX:MaxMetaspaceSize</code> 옵션을 사용하여 크기를 조절할 수 있다.</ul><h2 id="3-requested-array-size-exceeds-vm-limit">3. Requested array size exceeds VM limit</h2><ul><li><code class="language-plaintext highlighter-rouge">Exception in thread "main".: java.lang.OutOfMemoryError: Requested array size exceeds VM limit</code><li>배열의 크기가 힙 영역의 크기보다 더 크게 지정되었을 때 발생한다.<li>고정된 크기가 아닌 계산된 변수로 배열 크기를 지정할 경우 발생할 수 있다.</ul><h2 id="4-request-size-bytes-for-reason-out-of-swap-space">4. request &lt;size&gt; bytes for &lt;reason&gt;. Out of swap space?</h2><ul><li><code class="language-plaintext highlighter-rouge">Exception in thread "main".: java.lang.OutOfMemoryError: request &lt;size&gt; bytes for &lt;reason&gt;. Out of swap space?</code><li>네이티브 힙 영역이 부족할 때, 즉 OS의 메모리(Swap 영역)가 부족한 상황이 되었을 때 발생한다.<ul><li>애플리케이션에서 호출하는 네이티브 메서드에서 메모리를 반환하지 않는 경우<li>다른 애플리케이션에서 메모리를 반환하지 않는 경우</ul></ul><h2 id="5-reason-stacktrace-native-method">5. &lt;reason&gt; &lt;stacktrace&gt; (Native method)</h2><ul><li><code class="language-plaintext highlighter-rouge">Exception in thread "main".: java.lang.OutOfMemoryError: &lt;reason&gt; &lt;stacktrace&gt; (Native method)</code><li>4번과 마찬가지로 네이티브 힙 영역에 메모리를 할당할 때 발생되는 에러이다.<li>4번의 경우는 JVM 코드에서 발생될 때, 이 경우는 JNI나 네이티브 코드에서 발생한다는 뜻이다.</ul><h1 id="메모리-문제와-gc-튜닝">메모리 문제와 GC 튜닝</h1><hr /><blockquote><p>너무 잦은 Full GC가 발생하면 성능에 많은 영향을 미친다. 이런 경우, 무작정 GC를 튜닝하기 보다는 GC가 많이 발생하지 않도록 하는 것이 먼저이다. 따라서, 다음과 같은 규칙을 잘 따랐는지 살펴봐야한다.</p></blockquote><ul><li>임시 메모리의 사용을 최소화<li>객체의 재사용<li>XML 처리 시 메모리를 많이 점유하는 DOM 보다 SAX를 사용<li>너무 많은 데이터를 한 번에 보여주는 비즈니스 로직 제거</ul><p><em>※ 자바 프로세스 id(pid)만 알면 <code class="language-plaintext highlighter-rouge">jstat</code>을 사용하여(<code class="language-plaintext highlighter-rouge">java -gcutil &lt;pid&gt; &lt;interval&gt;</code>) 각 영역별로 메모리를 얼마나 사용하는지 확인할 수 있다. jstat은 $JAVA_HOME/bin 디렉토리에 존재한다.</em></p><h1 id="더-공부할-부분">더 공부할 부분</h1><hr /><ul><li>finalize를 사용하면 안되는 이유<li>스레드 우선순위<li>gc 로그 보는 법<li>swap 영역 ?</ul><h1 id="참고-자료">참고 자료</h1><hr /><ul><li>이상민, 『자바 트러블슈팅』, 제이펍(2019), 12장.<li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gc-ergonomics.html">https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gc-ergonomics.html</a><li><a href="https://docs.oracle.com/cd/E12839_01/web.1111/e13814/jvm_tuning.htm#PERFM150">https://docs.oracle.com/cd/E12839_01/web.1111/e13814/jvm_tuning.htm#PERFM150</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EC%A7%80%EC%8B%9D-%EB%8D%94%ED%95%98%EA%B8%B0/'>지식 더하기</a>, <a href='/categories/%EC%9D%B4%EB%A1%A0/'>이론</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >Java</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Java - 자바 힙 메모리 사이즈와 OutOfMemoryError - zz9z9&url=https://zz9z9.github.io/posts/heap-size-and-oome/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Java - 자바 힙 메모리 사이즈와 OutOfMemoryError - zz9z9&u=https://zz9z9.github.io/posts/heap-size-and-oome/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Java - 자바 힙 메모리 사이즈와 OutOfMemoryError - zz9z9&url=https://zz9z9.github.io/posts/heap-size-and-oome/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/daily-note-251016/">오늘 드는 생각 (251016, 은탄환)</a><li><a href="/posts/daily-note-251015/">오늘 드는 생각 (251015, 일과 공부)</a><li><a href="/posts/thinking-about-maintenance/">유지보수하기 어렵다 ?</a><li><a href="/posts/mysql-nested-loop-join/">MySQL - Nested-Loop Join 알아보기</a><li><a href="/posts/mysql-hash-join/">MySQL - Hash Join 알아보기</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/web/">WEB</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/http/">HTTP</a> <a class="post-tag" href="/tags/spring-batch/">Spring Batch</a> <a class="post-tag" href="/tags/oop/">OOP</a> <a class="post-tag" href="/tags/mybatis/">MyBatis</a> <a class="post-tag" href="/tags/os/">OS</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/heap-analyze-with-jmap-and-mat/"><div class="card-body"> <span class="timeago small" > Jul 20, 2021 <i class="unloaded">2021-07-20T23:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java - 자바 메모리 단면 분석하기</h3><div class="text-muted small"><p> 언제 메모리 단면을 분석해야할까 ? 메모리 단면인 ‘힙 덤프(Heap Dump)’는 생성하는데 비용이 비싸기 때문에, 메모리가 부족해지는 현상이 지속해서 발생하거나 OOM 에러가 발생했을 때 생성해야 한다. 여기서 말하는 비용이란 다음과 같다 덤프 파일을 생성하는 동안 서비스가 불가능한 상황이 된다. 덤프 생성시 많은 시간이 소요될 수 있다...</p></div></div></a></div><div class="card"> <a href="/posts/excel-using-poi-library/"><div class="card-body"> <span class="timeago small" > Jul 22, 2021 <i class="unloaded">2021-07-22T00:29:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java - 자바로 엑셀을 만들기 위한 POI 라이브러리 살펴보기</h3><div class="text-muted small"><p> 회사 프로젝트에서 조회한 화면에 대해 엑셀 파일로 다운받게 만들어주는 기능을 구현해야 했다. 방법을 찾다보니 POI 라이브러리라는게 있었고 이를 활용해서 구현할 수 있었다. 하지만, 다른 파트에서 해당 라이브러리를 사용하다 OOM(Out Of Memory)에러가 발생했고, 구현체를 살펴보니 XSSF의 usermodel을 사용하고 있었다. 해당 파트에서...</p></div></div></a></div><div class="card"> <a href="/posts/java-threadpool-executor-framework/"><div class="card-body"> <span class="timeago small" > Aug 7, 2021 <i class="unloaded">2021-08-07T00:29:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java - Thread Pool을 위한 Java Executor Framework</h3><div class="text-muted small"><p> 자바에서의 비동기 처리를 위해 CompletableFuture에 대해 공부하며 클래스 내부를 보다보니 Executor, ForkJoinPool 등이 눈에 띄었다. 생소한 부분이라 공부하며 나름대로 정리해보았다. Thread Pool Executor, ForkJoinPool에 대해 알기 전에 먼저 스레드 풀의 개념에 대해 살펴보자. 스...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/kafka-basic-concept/" class="btn btn-outline-primary" prompt="Older"><p>카프카의 전반적인 구성과 동작 방식 살펴보기</p></a> <a href="/posts/heap-analyze-with-jmap-and-mat/" class="btn btn-outline-primary" prompt="Newer"><p>Java - 자바 메모리 단면 분석하기</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Lee JaeYoon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">Java</a> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/web/">WEB</a> <a class="post-tag" href="/tags/infra/">Infra</a> <a class="post-tag" href="/tags/http/">HTTP</a> <a class="post-tag" href="/tags/spring-batch/">Spring Batch</a> <a class="post-tag" href="/tags/oop/">OOP</a> <a class="post-tag" href="/tags/mybatis/">MyBatis</a> <a class="post-tag" href="/tags/os/">OS</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://zz9z9.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
