---
title: Service는 어떤 부분을 테스트 해야할까 ?
date: 2025-05-07 22:20:00 +0900
categories: [생각해보기, 코드 작성]
tags: []
---

## Service 레이어의 책임 ?
- 애플리케이션이 다루는 **도메인(비즈니스)에 특화된 요구사항**을 처리한다고 생각
  - 예를 들어, Controller는 HTTP 요청/응답 등 웹과 관련된 요구사항이라고 생각

## 그럼 Service 레이어의 어떤 부분을 검증해야 신뢰도 높은 애플리케이션이 될 수 있을까 ?
- 정상적인 상황에서
  - 비즈니스 요구사항을 제대로 처리하는지
    -> 비즈니스 요구사항을 처리하려면 반드시 정상 동작해야하는 부분들에 대한 테스트 ?
    -> 반드시 정상 동작해야하는 부분들 ?
      -> 음 ,, '상품권 사용 처리'를 생각해보면 '마일리지 적립 api 호출'은 반드시 필요함.
        -> 10번 넘게 시도했을때 제대로 블로킹되는지 이런 부분들은 반드시 정도까지는 아니라고 생각, 경우에 따라서는 운영에서 이런게 매우 중요한 상황이라고 한다면, 검증해야 한다고 생각. 즉 맥락에 따라 달라질 수 있다고 생각.
        -> '운영자에게 알림' 등도 마찬가지 -> 어떤 이벤트가 발생했을 때, 적절한 대응을 하는 자동화된 시스템이 있고, 운영자에게 이를 알리는건 참고용 정도인 느낌인 경우엔 '운영자에게 알림'까지 테스트를 작성할 필요가 없을 수 있지만, 아직 초기이고 이슈 발생시 운영에서 매우 중요한 대응들을 한다면 이 부분에 대한 테스트는 필수일 것으로 생각.

- 비정상적인 상황에서
  - 호출자에게 적절한 응답을 전달하는지
  - 비정상적인 요청이 시스템에 불필요한 이슈를 발생시키지 않도록, 방어가 잘 이루어지는지

## 테스트 작성시 생각해볼 것들

### Spring Context가 필요할까 ?
- `FooService`에서 의존하는 객체들을 생성하기 위해 해당 객체들에서 의존하는 것들을 또 알아야하는 식이면 Spring Context가 있어야 테스트가 가능하지 않을까 생각

### 테스트 더블을 사용해야할까 ? 사용한다면 어떤식으로 해야할까 ?
- 근데 서비스 레이어에서 '도메인 로직 처리를 제대로 하는지'에 대한 부분은 결국 api나 db 호출 정도밖에 없지 않나 ??

**DB에 접근하는 DAO(Data Access Object)**
**외부 API 호출**

**기타 ?**

### FooService를 생성하기 위한 의존성이 너무 많다 ?
